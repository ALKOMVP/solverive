import{r as n}from"./index.CVf8TyFT.js";var b={exports:{}},f={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m=n,v=Symbol.for("react.element"),j=Symbol.for("react.fragment"),_=Object.prototype.hasOwnProperty,R=m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S={key:!0,ref:!0,__self:!0,__source:!0};function g(s,e,c){var t,o={},i=null,a=null;c!==void 0&&(i=""+c),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(t in e)_.call(e,t)&&!S.hasOwnProperty(t)&&(o[t]=e[t]);if(s&&s.defaultProps)for(t in e=s.defaultProps,e)o[t]===void 0&&(o[t]=e[t]);return{$$typeof:v,type:s,key:i,ref:a,props:o,_owner:R.current}}f.Fragment=j;f.jsx=g;f.jsxs=g;b.exports=f;var r=b.exports;function E(){const[s,e]=n.useState(!1),[c,t]=n.useState(!1),[o,i]=n.useState([]),a=n.useRef(null),u=n.useRef(null);n.useEffect(()=>{s&&a.current?.focus()},[s]),n.useEffect(()=>{u.current&&(u.current.scrollTop=u.current.scrollHeight)},[o]);async function y(l){l.preventDefault();const d=a.current.value.trim();if(d){i(p=>[...p,{role:"user",content:d}]),a.current.value="",t(!0);try{const x=await(await fetch("/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:d,topK:5})})).json();i(h=>[...h,{role:"assistant",content:x.answer||"Sin respuesta"}])}catch{i(x=>[...x,{role:"assistant",content:"Error de servidor"}])}finally{t(!1)}}}return r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"btn",style:{position:"fixed",right:16,bottom:16,zIndex:40},onClick:()=>e(l=>!l),children:"Chat IA"}),s&&r.jsxs("div",{style:{position:"fixed",right:16,bottom:74,width:"min(400px,92vw)",maxHeight:"70vh",display:"flex",flexDirection:"column",background:"#0f1530",border:"1px solid rgba(255,255,255,.1)",borderRadius:14,overflow:"hidden",zIndex:40},children:[r.jsxs("div",{style:{padding:"10px 12px",background:"rgba(255,255,255,.06)",display:"flex",justifyContent:"space-between"},children:[r.jsx("strong",{children:"Solverive Assistant"}),r.jsx("button",{onClick:()=>e(!1),children:"✕"})]}),r.jsxs("div",{ref:u,style:{padding:12,overflow:"auto",display:"flex",flexDirection:"column",gap:10},children:[o.map((l,d)=>r.jsx("div",{style:{alignSelf:l.role==="user"?"flex-end":"flex-start",background:l.role==="user"?"#1b2142":"#11162a",border:"1px solid rgba(255,255,255,.1)",padding:10,borderRadius:10},children:l.content},d)),c&&r.jsx("div",{className:"card",children:"Pensando…"})]}),r.jsxs("form",{onSubmit:y,style:{display:"flex",gap:8,padding:12,borderTop:"1px solid rgba(255,255,255,.1)"},children:[r.jsx("input",{ref:a,placeholder:"Preguntá sobre la empresa…",style:{flex:1,padding:"10px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"rgba(255,255,255,.05)",color:"#e5e7eb"}}),r.jsx("button",{className:"btn",type:"submit",children:"Enviar"})]})]})]})}export{E as default};
